<?php
class ChanakyaString
{
	var $array_one;
	var $array_two;
	var $array_three;
	var $array_forth;
	function ChanakyaString()
	{
		$this->array_one = array(
	/*1 */	"¤","U","ú","¡ê","¡é"," ",
	/*2 */	"¢ð","´ð","¢¸","ð¸","ðð","¢¢","ï","ðþ","Ñ","ðý","ñý","¢þ","¡¡",
	/*3 */	"¥æò","¸",
	/*4 */	"•¸", "¹¸", "»¸", "Á¸","Ç¸", "É¸", "È¸","Ø¸","Ú¸",
	/*5 */	"A","B","C","D","E","F","G","H","I","J","K","L","M",
	/*6 */	"N","O","P","Q","R","T","V","W","X","Y",
	/*7 */	"`","a","b","d","e","f","g","h","i","j","k","l","m","n","p","q","r","s","t","u","_",  
	/*8 */	"žæ","ž","#","%","@",
	/*9 */	"„","¦","¨","¯","µ","º",
	/*10 */	"Cþ","q","Ê","u","g",    
	/*11 */	"Ÿæ","Åþ","Çþ","Éþ", 
	/*12 */	"^","h","Ð","ý","þ",
	/*13 */	"¥ô","¥æð","¥õ","¥æñ","¥æ","¥","§Z","§ü","§","©","ª","«","¬","­","°ð","°",
	/*14 */	"€", "·", "",  "¹", "‚", "»", "ƒæ", "ƒ", "¾", 
	/*15 */	"“","‘","¿","À","”","…","’","Á","Ûæ","Û","†æ","†",
	/*16 */	"Å","Æ","Ç","É","‡æ","‡",
	/*17 */	"ˆ","Ì","‰","Í","Î","¼","Š","Ï","óæ","ó","‹æ","Ù","‹",
	/*18 */	"Œ","Â","","È","Ž","Õ","","Ö","","×",
	/*19 */	"Ä","Ø","Ú","Ë","Ü","¶","Ý","Ã","ß",
	/*20 */	"àæ","³æ","o","³","à","c","á","S","â","ã","±",
	/*21 */	"ÿæ","ÿ","˜æ","˜","™æ","™","üð´",
	/*22 */	"æò","æñ","æ","è","é","ê","ä","å","ë","ì","í","Ô","ñ","ô","õ",
	/*23 */	"¢","´","¡","Ñ","¸","ò","ù","÷","ð",
	/*24 */	"0","1","2","3","4","5","6","7","8","9",
	/*25 */	"®","v","w","x","y","z","{","|","}","~","ü","ç","\n","\t",
	/*26 */	"??","??","???", "???","??","??","??","??","??","??","??","??","???" );
	
	
		$this->array_two = array(
	/*1 */	"", "","à¥","ÃªÂ¡","Ã©Â¡"," ",
	/*2 */	"Ã°Â¢", "Ã°Â´","Â¸Â¢","Â¸Ã°","Ã°","Â¢","","Ã¾Ã°","à¤ƒ","Ã½Ã°","Ã½Ã±","Ã¾Â¢","Â¡",
	/*3 */	"à¤‘", "à¥žà¥",
	/*4 */	"à¥˜","à¥™","à¥š","à¥›","à¥œ","à¥","à¥ž","à¥Ÿ","à¤±",
	/*5 */	"à¥à¤°","à¤•à¥à¤š","à¤·à¥à¤Ÿ","à¤·à¥à¤ ","à¤¶à¥à¤µ","à¤¸à¥à¤¨","à¤¤à¥à¤°","à¥¥","à¤¢à¥à¤¢","à¤›à¥à¤µ","à¥à¤¯","à¤°à¥","à¤°à¥‚",
	/*6 */	"à¤¹à¥ƒ","à¤¹à¥à¤°","à¤•à¥à¤•","à¤•à¥à¤¤","à¤•à¥à¤°","à¤žà¥à¤œ","à¤™à¥à¤•","à¤™à¥à¤–","à¤™à¥à¤—","à¤™à¥à¤˜",
	/*7 */	"à¤•à¥à¤µ","à¤¡à¥à¤¡","à¤¡à¥à¤¢","à¤¸à¥à¤°","à¤¦à¥à¤—","à¤¦à¥à¤˜","à¤¦à¥à¤¦","à¤¦à¥à¤§","à¤¦à¥à¤¬","à¤¦à¥à¤­","à¤¦à¥à¤®","à¤¦à¥à¤¯","à¤¦à¥à¤µ","à¤ à¥à¤ ","à¤¶à¥à¤š","à¤¹à¥à¤¨","à¤¹à¥à¤®à¥","à¤¹à¥à¤¯","à¤¹à¥à¤²","à¤¹à¥à¤µ","à¤Ÿà¥à¤ ", 
	/*8 */	"à¤¤à¥à¤¤","à¤¤à¥à¤¤à¥","à¤ªà¥à¤¤","à¤¤à¥à¤¨","à¤žà¥à¤š",
	/*9 */	"à¤²à¥à¤²","à¤·à¥à¤Ÿà¥à¤µ","à¤™à¥à¤•à¥à¤·","à¤–à¥à¤¨","à¤¦à¥à¤¬à¥à¤°","à¤–à¥à¤°",
	/*10 */	"à¤·à¥à¤Ÿà¥à¤°","à¤¹à¥à¤¨","à¤œà¤¼à¥","à¤¹à¥à¤µ","à¤¦à¥à¤¦",  
	/*11 */	"à¤¶à¥à¤°","à¤Ÿà¥à¤°","à¤¡à¥à¤°","à¤¢à¥à¤°",
	/*12 */	"à¤Ÿà¥à¤Ÿ","à¤¦à¥à¤§","à¥¤","à¥à¤°","à¥à¤°",
	/*13 */	"à¤“","à¤“","à¤”","à¤”","à¤†","à¤…","à¤ˆà¤‚","à¤ˆ","à¤‡","à¤‰","à¤Š","à¤‹","à¥ ","à¤Œ","à¤","à¤",
	/*14 */	"à¤•à¥", "à¤•","à¤–à¥","à¤–","à¤—à¥","à¤—","à¤˜","à¤˜à¥","à¤™",
	/*15 */	"à¤šà¥à¤šà¥","à¤šà¥","à¤š","à¤›","à¤œà¥à¤œà¥","à¤œà¥","à¤œà¥","à¤œ","à¤","à¤à¥","à¤ž","à¤žà¥",
	/*16 */	"à¤Ÿ","à¤ ","à¤¡","à¤¢","à¤£","à¤£à¥",
	/*17 */	"à¤¤à¥","à¤¤","à¤¥à¥","à¤¥","à¤¦","à¤¦","à¤§à¥","à¤§","à¤¨à¥à¤¨","à¤¨à¥à¤¨à¥","à¤¨","à¤¨","à¤¨à¥",
	/*18 */	"à¤ªà¥","à¤ª","à¤«à¥","à¤«","à¤¬à¥","à¤¬","à¤­à¥","à¤­","à¤®à¥","à¤®",
	/*19 */	"à¤¯à¥","à¤¯","à¤°","à¤²à¥","à¤²","à¤²","à¤³","à¤µà¥","à¤µ",
	/*20 */	"à¤¶","à¤¶","à¤¶","à¤¶à¥","à¤¶à¥","à¤·à¥","à¤·","à¤¸à¥","à¤¸","à¤¹","à¤¹à¥",
	/*21 */	"à¤•à¥à¤·","à¤•à¥à¤·à¥","à¤¤à¥à¤°","à¤¤à¥à¤°à¥","à¤œà¥à¤ž","à¤œà¥à¤žà¥","Ã°Z",
	/*22 */	"à¥‰","à¥Œ","à¤¾","à¥€","à¥","à¥‚","à¥","à¥‚","à¥ƒ","à¥„","à¥¢","à¥‡","à¥ˆ","à¥‹","à¥Œ",
	/*23 */	"à¤‚","à¤‚","à¤",":","à¤¼", "à¥…","à¤½","à¥","à¥‡",
	/*24 */	"à¥¦","à¥§","à¥¨","à¥©","à¥ª","à¥«","à¥¬","à¥­","à¥®","à¥¯",
	/*25 */	"0","à¤•à¥","à¤–à¥","à¤«à¥","à¤¬à¥","à¤­à¥","à¤®à¥","à¤¸à¥à¤¤à¥à¤°","à¤¤à¥à¤¤à¥","-","à¤°à¥","à¤¿","\n","\t",
	/*26 */	"à¥‡", "à¥ˆ", "à¥‡","à¤¾","à¥‹","à¥‹","à¥Œ","","à¥à¤‚","à¤“","à¥‹","à¥‹","à¤ˆà¤‚");
	
	
		$this->array_three = array("c","o","r","v","w","y","z","{","}","‚","ƒ","…","†","ˆ","‰","Š","‹","Œ","‘","’","“","”","•","˜","™","Ÿ","±","³","²","Ä","Ê","Ë","Û","à","ó","æ","‡","ÿæ","ÿ","˜æ","˜","™æ","™","üð´","æò","æñ","è","é","ê","ä","å","ë","ì","í","Ô","ñ","ô","õ","¢ð","´ð","¢¸","ð¸","ðð","¢¢","ï","ðþ","Ñ","ðý","ñý","¢þ","¡¡","¢","´","¡","Ñ","¸","ò","ù","÷","ð");
		//$this->array_three = array();
		
		$this->array_forth = array("c","o","r","v","w","y","z","{","}","‚","ƒ","…","†","ˆ","‰","Š","‹","Œ","‘","’","“","”","•","˜","™","Ÿ","±","³","²","Ä","Ê","Ë","Û","à","ó","‡","ü");
		
		$this->array_fifth= array("c","o","r","v","w","y","z","{","}","‚","ƒ","…","†","ˆ","‰","Š","‹","Œ","‘","’","“","”","•","˜","™","Ÿ","±","³","²","Ä","Ê","Ë","Û","à","ó");
	}
	private function findPosition($str,$k,$p=0)
	{
		$t = 0;
		for($i=0;$i<strlen($str);$i++)
		{
			if($str[$i]==$k)
			{
				
				if($p==$t)
				{
					return $i;
				}
				$t++;
			}
		}
		return false;
	}
	function toUTF8($str)
	{
		$out = "";
		$l = strlen($str);
		
		$pos = 0;
		$p = $this->findPosition($str,"ü",$pos);
		
		$pp = $p;
		$pos++;
		//echo $str."<br><br>";
		while($p>0)
		{
			$p--;
			//echo $str[$p]."..".$pp."..".$p."<br />";
			if(array_search($str[$p],$this->array_three)!==false)
			{
				//echo "&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;".$str[$p]."..".$pp."..".$p."<br />";
				$pi=$p;
				$sp = false;
				while(array_search($str[$pi],$this->array_three)!==false)
				{
					//echo "&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;".$pi."..".$str[$pi]."<br>";
					//if(array_search($str[$pi-1],$this->array_three)===false || $str[$pi]=="")
					{
						$str[$pi+1]=$str[$pi];
						$pi=$pi-1;
					}
					//else
					{
						//break;
					}
				}
				$str[$pi+1]=$str[$pi];
				$str[$pi]="ü";
				/*
				if($pp-$p==1)
				{
					for($i=$pp;$i>$p;$i--)
					{
						$str[$i]=$str[$i-1];
					}
				}
				else
				{
					for($i=$pp;$i>$p+1;$i--)
					{
						$str[$i]=$str[$i-1];
					}
				}
				
				$str[$i]="ü";*/
				$p=$this->findPosition($str,"ü",$pos);
				$pos++;
				$pp=$p;
				if($p==false)
				{
					break;
				}
			}
			else
			{
				//echo $str[$p]."<br>";
			}
			
		}
		
		//echo $str."<br><br>";
		
		
		$pos = 0;
		$p = $this->findPosition($str,"ç",$pos);
		$pp = $p;
		$pos++;
		while($p>0)
		{
			$p++;
			if(array_search($str[$p],$this->array_forth	)===false)
			{
				//echo $str[$p]."..".$pp."..".$p."<br />";
				
					for($i=$pp;$i<$p;$i++)
					{
						$str[$i]=$str[$i+1];
					}
				
				$str[$i]="ç";
				$p=$this->findPosition($str,"ç",$pos);
				$pos++;
				$pp=$p;
				if($p==false)
				{
					break;
				}
			}
			
		}
		//echo $str;
		for($i=0;$i<$l;$i++)
		{
			$ch = $str[$i];
			
			$p = array_search($ch,$this->array_one);
			//echo "$p";
			$out.= $this->array_two[$p];
			//echo "<br>";
			//$str = str_replace($this->array_one[$i],$this->array_tow[$i],$str);
		}
		$out = str_replace("à¥à¤¾","",$out);
		
		$out = str_replace("à¤¾à¥‡","à¥‹",$out);
		$out = str_replace("à¤¾à¥ˆ","à¥Œ",$out);
		$out = str_replace("à¤…à¤¾","à¤†",$out);
		$out = str_replace("à¤…à¥‹","à¤“",$out);
		$out = str_replace("à¤…à¥Œ","à¤”",$out);
		return $out;
		
	}
}
?>